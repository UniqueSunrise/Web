<!DOCTYPE html>
<html lang = "eng">
<head>
	<meta charset = "UTF-8">
	<title>Университет</title>
	<script src = "https://unpkg.com/vue83"></script>
	<script src = "https://unpkg.com/vue-router@4"></script>
	<script src = "https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
	<link rel = "stylesheet" type = "text/css" href = "main.css">	
</head>
<body>
	<div id = "app">
		<router-view></router-view>
	</div>
	<script>
		studentsComponent = {};
		addStudentsComponent = {}
		
		const routes = [
			{path: '/', component: studentsComponent},
			{path: '/students', component: studentsComponent},
			{path: '/addStudent', component: addStudentsComponent}
			]
		const router = new VueRouter.createRouter({
			history: VueRouter.createWebHistory(),
			routes
		})
		
		const app = Vue.createApp({})
		app.use(router)
		app.mount('#app')
	</script>
	
	studentsComponent = {
		template: ``,
		date() {
			return {
			loading: true,
			students: null
			};
		},
		methods: {
			addStudents: function (event) {
				this.$router.push('/addStudent');
			},
		},
		mounted() {
			axios
				.get('http://localhost:8080?students', {mode: 'no-cors'})
				.then(response => (this.students = respone.date))
				.finally(() => this.loading = false);
		`<div v-if="loading">Loading...</div>
		<div v-else>
			<div class = "table">
				<div class = "caption"><h1>Список студентов</h1></div>
				<div class = "header">
					<div class = "header-item h-1">Номер студента</div>
					<div class = "header-item h-1">Номер студента</div>
				</div>
				<div class = "row" v-for="students in students">
					<div class = "row-item r-1">
						{ {sudents.id} }
					</div>
					<div class = "row-item r-2">
						{ {sudents.name} }
					</div>
					
				</div>
			</div>
			<div>
				<button class = "button" v-on:click="addStudent">Добавить</button>
			</div>
			</div>
		</div>
		
		addStudentComponent = {

			template: ``,
			date() {
				return {
					students: {
						id: null,
						name: null
					} } },
					addStudents: function (events) {
						axios.post('http://localhost:8080/students', 
						JSON.stringify(this.student), {
							headers:{'Content-Type': 'application/json; charset=utf-8'}
							})
						.then (response => 
							console.log("student added");
							this.$router.push('/students');
						})
						.catch(error => {
						 alert(error);
						});
					},
					cancel: function (event) {
						this.$router.push('/students');
					}
				}
			}	
			<div>

			<div class="add-form">
				<div class="title" class="caption"><h1>opма добавления студента</h1></div>
					<section>
						<div>
							<div>
								<input type="text" v-model="student.id" placeholder="Hoмep студента">
							</div>
							<div>
							<input type="text" v-model="student.name" placeholder="Имя студента">
							</div>
						</div>
					</section>
				</div>
			<div class="button-container">
			<div class="buttons">
			<div>
			<button class="button" v-on: click="addStudent">Cоxpанить</button>
			<button class="button" v-on:click="cancel">отмена</button>
			</div>
			</div>
			</div>
			</div>`,
		
</body>
</html>
